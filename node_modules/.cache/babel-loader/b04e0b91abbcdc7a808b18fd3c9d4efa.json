{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u0410\\u0442\\u0447\\u0430\\u043D\\u043E\\u0432\\u0410\\\\JS-React-Exam\\\\src\\\\BooksBlock.js\";\nimport React from 'react';\nimport './BooksBlock.css';\nimport ModalBook from './ModalBook';\n\nclass BooksBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: [],\n      searchTag: 'name',\n      editView: false,\n      modalContext: '',\n      showEditBook: false,\n      bookEdit: {}\n    };\n    this.onChangeSelect = this.onChangeSelect.bind(this);\n    this.searchBook = this.searchBook.bind(this);\n    this.showModalBook = this.showModalBook.bind(this);\n    this.closeModalBook = this.closeModalBook.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      books: JSON.parse(localStorage.getItem('books'))\n    });\n  }\n\n  searchBook(e) {\n    var books = JSON.parse(localStorage.getItem('books'));\n    books.forEach(function (item) {\n      if (!item.name.toUpperCase().startsWith(e.target.value.toUpperCase())) {\n        delete books[books.indexOf(item)];\n      }\n    });\n    this.setState({\n      books: books\n    });\n  }\n\n  showModalBook(e) {\n    var book = {};\n    this.state.books.forEach(function (item) {\n      if (item.id === e) {\n        book = item;\n      }\n    });\n    this.setState({\n      bookEdit: book,\n      showEditBook: true\n    });\n  }\n\n  closeModalBook() {\n    this.setState({\n      showEditBook: false\n    });\n  }\n\n  onChangeSelect(e) {\n    var books = this.state.books;\n    books = books.sort(function (a, b) {\n      return a[e.target.value].localeCompare(b[e.target.value]);\n    });\n    this.setState({\n      books: books,\n      searchTag: e.target.value\n    });\n  }\n\n  render() {\n    const books = this.state.books;\n    return React.createElement(\"div\", {\n      className: \"books-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, this.state.showEditBook && React.createElement(ModalBook, {\n      books: this.state.books,\n      className: \"modal\",\n      book: JSON.parse(JSON.stringify(this.state.bookEdit)),\n      close: this.closeModalBook,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"ALL BOOKS:\"), React.createElement(\"button\", {\n      onClick: () => this.showModalBook({}),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"New book\")), React.createElement(\"div\", {\n      className: \"middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sort\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Sort by:\"), React.createElement(\"select\", {\n      value: this.state.searchTag,\n      onChange: e => this.onChangeSelect(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"NAME\"), React.createElement(\"option\", {\n      value: \"author\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"AUTHOR\"), React.createElement(\"option\", {\n      value: \"count\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"COUNT\"))), React.createElement(\"div\", {\n      className: \"search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Search:\"), React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.searchBook,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"NAME\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"AUTHOR\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"YEAR\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"PUBLISH\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"PAGES\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"COUNT\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"EDIT\"), books.map(item => React.createElement(\"tr\", {\n      key: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, item.id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, item.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, item.author), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, item.year), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, item.publish), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, item.pages), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, item.count), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      key: item.id,\n      onClick: () => this.showModalBook(item.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"EDIT\")))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default BooksBlock;","map":{"version":3,"sources":["C:\\Users\\АтчановА\\JS-React-Exam\\src\\BooksBlock.js"],"names":["React","ModalBook","BooksBlock","Component","constructor","props","state","books","searchTag","editView","modalContext","showEditBook","bookEdit","onChangeSelect","bind","searchBook","showModalBook","closeModalBook","componentDidMount","setState","JSON","parse","localStorage","getItem","e","forEach","item","name","toUpperCase","startsWith","target","value","indexOf","book","id","sort","a","b","localeCompare","render","stringify","map","author","year","publish","pages","count"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './BooksBlock.css';\r\nimport ModalBook from './ModalBook'\r\n\r\nclass BooksBlock extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n        books:[],\r\n        searchTag:'name',\r\n        editView:false,\r\n        modalContext:'',\r\n        showEditBook:false,\r\n        bookEdit:{}\r\n    }\r\n    this.onChangeSelect = this.onChangeSelect.bind(this);\r\n    this.searchBook = this.searchBook.bind(this);\r\n    this.showModalBook = this.showModalBook.bind(this);\r\n    this.closeModalBook = this.closeModalBook.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.setState({books:JSON.parse(localStorage.getItem('books'))});\r\n  }\r\n\r\n  searchBook(e){\r\n    var books = JSON.parse(localStorage.getItem('books'));\r\n    books.forEach(function(item){\r\n        if(!item.name.toUpperCase().startsWith(e.target.value.toUpperCase())){\r\n            delete books[books.indexOf(item)];\r\n        }\r\n    });\r\n\r\n    this.setState({books:books});\r\n  }\r\n\r\n  showModalBook(e){\r\n    var book = {};\r\n    this.state.books.forEach(function(item){\r\n        if(item.id===e){\r\n          book=item;\r\n        }\r\n    });\r\n    this.setState({bookEdit:book,showEditBook:true});\r\n  }\r\n\r\n  closeModalBook(){\r\n    this.setState({showEditBook:false});\r\n  }\r\n\r\n  onChangeSelect(e){\r\n    var books = this.state.books;\r\n       books = books.sort(function (a, b) {\r\n           return a[e.target.value].localeCompare(b[e.target.value]);\r\n       })\r\n\r\n    this.setState({books:books,searchTag:e.target.value});\r\n  }\r\n\r\n  render() {\r\n    const books = this.state.books;\r\n    return (     \r\n      <div className=\"books-block\">\r\n         {this.state.showEditBook &&                   \r\n          <ModalBook books={this.state.books} className=\"modal\" book={JSON.parse(JSON.stringify(this.state.bookEdit))} close={this.closeModalBook}/>\r\n        }\r\n          <div className=\"header\">\r\n              <h3>ALL BOOKS:</h3>\r\n              <button onClick={()=>this.showModalBook({})}>New book</button>\r\n          </div>\r\n          <div className=\"middle\">\r\n              <div className=\"sort\">\r\n                  <label>Sort by:</label>\r\n                  <select value={this.state.searchTag} onChange={(e)=>this.onChangeSelect(e)}>             \r\n                    <option value=\"name\">NAME</option>\r\n                    <option value=\"author\">AUTHOR</option>   \r\n                    <option value=\"count\">COUNT</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"search\">\r\n                  <label>Search:</label>\r\n                  <input type=\"text\" onChange={this.searchBook}></input>\r\n              </div>\r\n          </div>\r\n          <div className=\"bottom\">\r\n            <table>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>AUTHOR</th>\r\n                <th>YEAR</th>\r\n                <th>PUBLISH</th>\r\n                <th>PAGES</th>\r\n                <th>COUNT</th>\r\n                <th>EDIT</th>\r\n                {books.map(item=>\r\n                    <tr key={item.id}>\r\n                        <td>{item.id}</td>\r\n                        <td>{item.name}</td>\r\n                        <td>{item.author}</td>\r\n                        <td>{item.year}</td>\r\n                        <td>{item.publish}</td>\r\n                        <td>{item.pages}</td>\r\n                        <td>{item.count}</td>\r\n                        <td><button key={item.id} onClick={()=>this.showModalBook(item.id)}>EDIT</button></td>\r\n                    </tr>\r\n                )}\r\n                <tr>\r\n\r\n                </tr>\r\n            </table>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default BooksBlock;"]},"metadata":{},"sourceType":"module"}