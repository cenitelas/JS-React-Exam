{"ast":null,"code":"var _jsxFileName = \"C:\\\\JS-React-Exam\\\\src\\\\ModalCart.js\";\nimport React from 'react';\nimport './ModalCart.css';\n\nclass ModalCart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      close: props.close,\n      carts: props.carts,\n      visitors: [],\n      books: [],\n      cart: {},\n      isNew: false\n    };\n    this.onChangeText = this.onChangeText.bind(this);\n    this.addCart = this.addCart.bind(this);\n  }\n\n  componentDidMount() {\n    if (!this.state.visitor.id) this.setState({\n      isNew: true\n    });else this.setState({\n      isNew: false\n    });\n  }\n\n  onChangeText(e, item) {\n    var visitor = this.state.visitor;\n    visitor[item] = e.target.value;\n    this.setState({\n      visitor: visitor\n    });\n  }\n\n  addCart() {\n    var cart = this.state.cart;\n    var carts = this.state.carts;\n    var maxId = 0;\n    carts.forEach(function (item) {\n      if (maxId < parseInt(item.id)) maxId = parseInt(item.id);\n    });\n    cart.id = '' + (maxId + 1);\n    carts.push(cart);\n    this.setState({\n      carts: carts\n    });\n    var books = this.state.books;\n    books.forEach(function (item) {\n      if (item.id === cart.book.id) {\n        books[books.indexOf(item)];\n      }\n    });\n    localStorage.removeItem(\"carts\");\n    localStorage.setItem('carts', JSON.stringify(carts));\n    this.state.close();\n  }\n\n  render() {\n    const visitor = this.state.visitor;\n    return React.createElement(\"div\", {\n      className: \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field-close\",\n      onClick: this.state.close,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"modal-context\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, this.state.isNew === false ? React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"EDIT VISITOR\") : React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"CREATE VISITOR\"), React.createElement(\"span\", {\n      onClick: this.state.close,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"X\")), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Name:\"), React.createElement(\"input\", {\n      type: \"text\",\n      onChange: e => this.onChangeText(e, 'name'),\n      value: visitor.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Phone:\"), React.createElement(\"input\", {\n      type: \"text\",\n      onChange: e => this.onChangeText(e, 'phone'),\n      value: visitor.phone,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.saveVisitor(visitor),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Save\"), this.state.isNew === false && React.createElement(\"button\", {\n      onClick: () => this.deleteVisitor(visitor),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Delete\")))));\n  }\n\n}\n\nexport default ModalCart;","map":{"version":3,"sources":["C:\\JS-React-Exam\\src\\ModalCart.js"],"names":["React","ModalCart","Component","constructor","props","state","close","carts","visitors","books","cart","isNew","onChangeText","bind","addCart","componentDidMount","visitor","id","setState","e","item","target","value","maxId","forEach","parseInt","push","book","indexOf","localStorage","removeItem","setItem","JSON","stringify","render","name","phone","saveVisitor","deleteVisitor"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './ModalCart.css';\r\n\r\n\r\nclass ModalCart extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n        close:props.close,\r\n        carts:props.carts,\r\n        visitors:[],\r\n        books:[],\r\n        cart:{},\r\n        isNew:false\r\n    }\r\n    this.onChangeText=this.onChangeText.bind(this);\r\n    this.addCart = this.addCart.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n      if(!this.state.visitor.id)\r\n      this.setState({isNew:true})\r\n      else\r\n      this.setState({isNew:false})\r\n  }\r\n  onChangeText(e,item){\r\n      var visitor = this.state.visitor;\r\n      visitor[item]=e.target.value;\r\n      this.setState({visitor:visitor});\r\n  }\r\n  \r\n  addCart(){\r\n    var cart = this.state.cart;\r\n    var carts = this.state.carts;\r\n    var maxId = 0;\r\n    carts.forEach(function(item){\r\n      if(maxId<parseInt(item.id))\r\n          maxId=parseInt(item.id);\r\n    });\r\n    cart.id=''+(maxId+1);\r\n    carts.push(cart);\r\n    this.setState({carts:carts});\r\n    var books = this.state.books;\r\n    books.forEach(function (item) {\r\n        if(item.id===cart.book.id){\r\n            books[books.indexOf(item)]\r\n        }\r\n    });\r\n    localStorage.removeItem(\"carts\")\r\n    localStorage.setItem('carts', JSON.stringify(carts));\r\n    this.state.close();\r\n  }\r\n\r\n  render() {\r\n      const visitor = this.state.visitor;\r\n    return (\r\n      <div className=\"modal\">\r\n          <div className=\"field-close\" onClick={this.state.close}></div>\r\n          <div className=\"modal-context\">\r\n              <div className=\"header\">\r\n                  {this.state.isNew===false ? (\r\n                  <h3>EDIT VISITOR</h3> \r\n                  ) : (\r\n                  <h3>CREATE VISITOR</h3>\r\n                  )}\r\n                  <span onClick={this.state.close}>X</span>\r\n              </div>\r\n              <div className=\"content\">\r\n                <label>Name:</label>\r\n                <input type=\"text\" onChange={(e)=>this.onChangeText(e,'name')} value={visitor.name}/>\r\n                <label>Phone:</label>\r\n                <input type=\"text\" onChange={(e)=>this.onChangeText(e,'phone')} value={visitor.phone}/>\r\n                <div>\r\n                    <button onClick={()=>this.saveVisitor(visitor)}>Save</button>\r\n                    {this.state.isNew===false &&\r\n                    <button onClick={()=>this.deleteVisitor(visitor)}>Delete</button>\r\n                    }\r\n                </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default ModalCart;\r\n"]},"metadata":{},"sourceType":"module"}