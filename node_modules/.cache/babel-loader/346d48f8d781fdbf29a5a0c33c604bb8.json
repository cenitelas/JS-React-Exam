{"ast":null,"code":"var _jsxFileName = \"C:\\\\JS-React-Exam\\\\src\\\\ModalCart.js\";\nimport React from 'react';\nimport './ModalCart.css';\n\nclass ModalCart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      close: props.close,\n      carts: props.carts,\n      visitors: props.visitors,\n      books: props.books,\n      cart: {},\n      book: props.books[0],\n      visitor: props.visitors[0]\n    };\n    this.onChangeSelect = this.onChangeSelect.bind(this);\n    this.addCart = this.addCart.bind(this);\n  }\n\n  onChangeSelect(e, item) {\n    var cart = this.state.cart;\n    var books = this.state.books;\n    var visitors = this.state.visitors;\n\n    if (item == 'book') {\n      books.forEach(function (book) {\n        if (book.id === e.target.value) {\n          cart.book = book;\n        }\n      });\n      this.setState({\n        book: cart.book\n      });\n    }\n\n    if (item == 'visitor') {\n      visitors.forEach(function (visitor) {\n        if (visitor.id == e.target.value) cart.visitor = visitor;\n      });\n      this.setState({\n        visitor: cart.visitor\n      });\n    }\n\n    this.setState({\n      cart: cart\n    });\n  }\n\n  addCart() {\n    var cart = this.state.cart;\n    var carts = this.state.carts;\n    var maxId = 0;\n    carts.forEach(function (item) {\n      if (maxId < parseInt(item.id)) maxId = parseInt(item.id);\n    });\n    cart.id = '' + (maxId + 1);\n    carts.push(cart);\n    this.setState({\n      carts: carts\n    });\n    var books = this.state.books;\n    books.forEach(function (item) {\n      if (item.id === cart.book.id) {\n        books[books.indexOf(item)].count = parseInt(books[books.indexOf(item)].count - 1) + '';\n      }\n    });\n    localStorage.removeItem(\"carts\");\n    localStorage.setItem('carts', JSON.stringify(carts));\n    localStorage.removeItem(\"books\");\n    localStorage.setItem('books', JSON.stringify(books));\n    this.state.close();\n  }\n\n  render() {\n    const carts = this.state.carts;\n    const books = this.state.books;\n    const visitors = this.state.visitors;\n    return React.createElement(\"div\", {\n      className: \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field-close\",\n      onClick: this.state.close,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"modal-context\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"CREATE CART\"), React.createElement(\"span\", {\n      onClick: this.state.close,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"X\")), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Book:\"), React.createElement(\"select\", {\n      value: this.state.book.name,\n      onChange: e => this.onChangeSelect(e, 'book'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, books.map(item => React.createElement(\"option\", {\n      key: item.id,\n      value: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, item.name))), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Visitor:\"), React.createElement(\"select\", {\n      value: this.state.visitor.name,\n      onChange: e => this.onChangeSelect(e, 'visitor'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, visitors.map(item => React.createElement(\"option\", {\n      key: item.id,\n      value: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, item.name))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.addCart(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Save\")))));\n  }\n\n}\n\nexport default ModalCart;","map":{"version":3,"sources":["C:\\JS-React-Exam\\src\\ModalCart.js"],"names":["React","ModalCart","Component","constructor","props","state","close","carts","visitors","books","cart","book","visitor","onChangeSelect","bind","addCart","e","item","forEach","id","target","value","setState","maxId","parseInt","push","indexOf","count","localStorage","removeItem","setItem","JSON","stringify","render","name","map"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './ModalCart.css';\r\n\r\n\r\nclass ModalCart extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n        close:props.close,\r\n        carts:props.carts,\r\n        visitors:props.visitors,\r\n        books:props.books,\r\n        cart:{},\r\n        book:props.books[0],\r\n        visitor:props.visitors[0],\r\n    }\r\n    this.onChangeSelect=this.onChangeSelect.bind(this);\r\n    this.addCart = this.addCart.bind(this);\r\n  }\r\n\r\n  onChangeSelect(e,item){\r\n      var cart = this.state.cart;\r\n      var books = this.state.books;\r\n      var visitors = this.state.visitors;\r\n      if(item=='book'){\r\n         books.forEach(function (book) { \r\n            if(book.id===e.target.value){\r\n            cart.book=book;\r\n            }\r\n         });\r\n\r\n         this.setState({book:cart.book});\r\n      }\r\n      if(item=='visitor'){\r\n        visitors.forEach(function (visitor) { \r\n           if(visitor.id==e.target.value)\r\n           cart.visitor=visitor;\r\n        });       \r\n        this.setState({visitor:cart.visitor});\r\n     }\r\n      this.setState({cart:cart});\r\n  }\r\n  \r\n  addCart(){\r\n    var cart = this.state.cart;\r\n    var carts = this.state.carts;\r\n    var maxId = 0;\r\n    carts.forEach(function(item){\r\n      if(maxId<parseInt(item.id))\r\n          maxId=parseInt(item.id);\r\n    });\r\n    cart.id=''+(maxId+1);\r\n    carts.push(cart);\r\n    this.setState({carts:carts});\r\n    var books = this.state.books;\r\n    books.forEach(function (item) {\r\n        if(item.id===cart.book.id){\r\n            books[books.indexOf(item)].count = parseInt(books[books.indexOf(item)].count-1)+'';\r\n        }\r\n    });\r\n    localStorage.removeItem(\"carts\")\r\n    localStorage.setItem('carts', JSON.stringify(carts));\r\n    localStorage.removeItem(\"books\")\r\n    localStorage.setItem('books', JSON.stringify(books));\r\n    this.state.close();\r\n  }\r\n\r\n  render() {\r\n      const carts = this.state.carts;\r\n      const books = this.state.books;\r\n      const visitors = this.state.visitors;\r\n    return (\r\n      <div className=\"modal\">\r\n          <div className=\"field-close\" onClick={this.state.close}></div>\r\n          <div className=\"modal-context\">\r\n              <div className=\"header\">\r\n                  <h3>CREATE CART</h3>\r\n                  <span onClick={this.state.close}>X</span>\r\n              </div>\r\n              <div className=\"content\">\r\n                <label>Book:</label>\r\n                <select value={this.state.book.name} onChange={(e)=>this.onChangeSelect(e,'book')}>   \r\n                    {books.map(item=>                \r\n                        <option key={item.id} value={item.id}>{item.name}</option>\r\n                    )}    \r\n                </select>\r\n                <label>Visitor:</label>\r\n                <select value={this.state.visitor.name} onChange={(e)=>this.onChangeSelect(e,'visitor')}>   \r\n                    {visitors.map(item=>                 \r\n                        <option key={item.id} value={item.id}>{item.name}</option>\r\n                     )}    \r\n                </select>\r\n                <div>\r\n                    <button onClick={()=>this.addCart()}>Save</button>\r\n                </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default ModalCart;\r\n"]},"metadata":{},"sourceType":"module"}