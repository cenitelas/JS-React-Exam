{"ast":null,"code":"var _jsxFileName = \"C:\\\\JS-React-Exam\\\\src\\\\CartsBlock.js\";\nimport React from 'react';\nimport './CartsBlock.css';\nimport ModalCart from './ModalCart';\n\nclass CartsBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      carts: [],\n      searchTag: 'visitor.name',\n      modalContext: ''\n    };\n    this.onChangeSelect = this.onChangeSelect.bind(this);\n    this.searchCart = this.searchCart.bind(this);\n    this.showModalCart = this.showModalCart.bind(this);\n    this.closeModalCart = this.closeModalCart.bind(this);\n    this.returnBook = this.returnBook.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      visitors: JSON.parse(localStorage.getItem('visitors'))\n    });\n    this.setState({\n      carts: JSON.parse(localStorage.getItem('carts'))\n    });\n    this.setState({\n      books: JSON.parse(localStorage.getItem('books'))\n    });\n  }\n\n  searchCart(e) {\n    var carts = JSON.parse(localStorage.getItem('carts'));\n    if (e.target.value.length > 0) carts.forEach(function (item) {\n      if (!item.visitor.name.toUpperCase().startsWith(e.target.value.toUpperCase())) {\n        delete carts[carts.indexOf(item)];\n      }\n    });\n    this.setState({\n      carts: carts\n    });\n  }\n\n  returnBook(cart) {\n    var books = JSON.parse(localStorage.getItem('books'));\n    books.forEach(function (item) {\n      if (item.id === cart.book.id) {\n        books[books.indexOf(item)].count = parseInt(books[books.indexOf(item)].count) + 1 + '';\n        carts.forEach(function (cart) {});\n      }\n    });\n  }\n\n  showModalCart(e) {\n    this.setState({\n      showEditCarts: true\n    });\n  }\n\n  closeModalCart() {\n    this.setState({\n      showEditCarts: false\n    });\n  }\n\n  onChangeSelect(e) {\n    var carts = this.state.carts;\n    carts = carts.sort(function (a, b) {\n      return a[e.target.value].localeCompare(b[e.target.value]);\n    });\n    this.setState({\n      carts: carts,\n      searchTag: e.target.value\n    });\n  }\n\n  render() {\n    const carts = this.state.carts;\n    return React.createElement(\"div\", {\n      className: \"carts-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, this.state.showEditCart && React.createElement(ModalCart, {\n      carts: this.state.carts,\n      className: \"modal\",\n      close: this.closeModalCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"ALL CARTS:\"), React.createElement(\"button\", {\n      onClick: () => this.showModalCart({}),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"New cart\")), React.createElement(\"div\", {\n      className: \"middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sort\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Sort by:\"), React.createElement(\"select\", {\n      value: this.state.searchTag,\n      onChange: e => this.onChangeSelect(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"visitor.name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"VISITOR NAME\"), React.createElement(\"option\", {\n      value: \"book.name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"BOOK NAME\"))), React.createElement(\"div\", {\n      className: \"search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Search:\"), React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.searchCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"VISITOR NAME\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"BOOK NAME\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"DATE TAKE\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"DATE GIVE\"), carts.map(item => React.createElement(\"tr\", {\n      key: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, item.id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, item.visitor.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, item.book.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, item.dateTake), item.dateGive ? React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, item.dateGive) : React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      key: item.id,\n      onClick: () => this.returnBook(item),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"RETURN\")))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default CartsBlock;","map":{"version":3,"sources":["C:\\JS-React-Exam\\src\\CartsBlock.js"],"names":["React","ModalCart","CartsBlock","Component","constructor","props","state","carts","searchTag","modalContext","onChangeSelect","bind","searchCart","showModalCart","closeModalCart","returnBook","componentDidMount","setState","visitors","JSON","parse","localStorage","getItem","books","e","target","value","length","forEach","item","visitor","name","toUpperCase","startsWith","indexOf","cart","id","book","count","parseInt","showEditCarts","sort","a","b","localeCompare","render","showEditCart","map","dateTake","dateGive"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './CartsBlock.css';\r\nimport ModalCart from './ModalCart'\r\n\r\nclass CartsBlock extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n        carts:[],\r\n        searchTag:'visitor.name',\r\n        modalContext:''\r\n    }\r\n    this.onChangeSelect = this.onChangeSelect.bind(this);\r\n    this.searchCart = this.searchCart.bind(this);\r\n    this.showModalCart = this.showModalCart.bind(this);\r\n    this.closeModalCart = this.closeModalCart.bind(this);\r\n    this.returnBook = this.returnBook.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.setState({visitors:JSON.parse(localStorage.getItem('visitors'))});\r\n    this.setState({carts:JSON.parse(localStorage.getItem('carts'))});\r\n    this.setState({books:JSON.parse(localStorage.getItem('books'))});\r\n  }\r\n\r\n  searchCart(e){\r\n    var carts = JSON.parse(localStorage.getItem('carts'));\r\n    if(e.target.value.length>0)\r\n    carts.forEach(function(item){\r\n        if(!item.visitor.name.toUpperCase().startsWith(e.target.value.toUpperCase())){\r\n            delete carts[carts.indexOf(item)];\r\n        }\r\n    });\r\n\r\n    this.setState({carts:carts});\r\n  }\r\n\r\n  returnBook(cart){\r\n    var books = JSON.parse(localStorage.getItem('books'));\r\n    books.forEach(function (item) {\r\n        if(item.id===cart.book.id){\r\n            books[books.indexOf(item)].count=(parseInt(books[books.indexOf(item)].count)+1)+'';\r\n            carts.forEach(function (cart) {  })\r\n        }\r\n    });\r\n  }\r\n\r\n  showModalCart(e){\r\n    this.setState({showEditCarts:true});\r\n  }\r\n\r\n  closeModalCart(){\r\n    this.setState({showEditCarts:false});\r\n  }\r\n\r\n  onChangeSelect(e){\r\n    var carts = this.state.carts;\r\n    carts = carts.sort(function (a, b) {\r\n           return a[e.target.value].localeCompare(b[e.target.value]);\r\n       })\r\n\r\n    this.setState({carts:carts,searchTag:e.target.value});\r\n  }\r\n\r\n  render() {\r\n    const carts = this.state.carts;\r\n    return (     \r\n      <div className=\"carts-block\">\r\n         {this.state.showEditCart &&                   \r\n          <ModalCart carts={this.state.carts} className=\"modal\" close={this.closeModalCart}/>\r\n        }\r\n          <div className=\"header\">\r\n              <h3>ALL CARTS:</h3>\r\n              <button onClick={()=>this.showModalCart({})}>New cart</button>\r\n          </div>\r\n          <div className=\"middle\">\r\n              <div className=\"sort\">\r\n                  <label>Sort by:</label>\r\n                  <select value={this.state.searchTag} onChange={(e)=>this.onChangeSelect(e)}>             \r\n                    <option value=\"visitor.name\">VISITOR NAME</option>\r\n                    <option value=\"book.name\">BOOK NAME</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"search\">\r\n                  <label>Search:</label>\r\n                  <input type=\"text\" onChange={this.searchCart}></input>\r\n              </div>\r\n          </div>\r\n          <div className=\"bottom\">\r\n            <table>\r\n                <th>ID</th>\r\n                <th>VISITOR NAME</th>\r\n                <th>BOOK NAME</th>\r\n                <th>DATE TAKE</th>\r\n                <th>DATE GIVE</th>\r\n                {carts.map(item=>\r\n                    <tr key={item.id}>\r\n                        <td>{item.id}</td>\r\n                        <td>{item.visitor.name}</td>\r\n                        <td>{item.book.name}</td>\r\n                        <td>{item.dateTake}</td>\r\n                        {item.dateGive ?(    \r\n                             <td>{item.dateGive}</td>\r\n                        ) : (\r\n                             <td><button key={item.id} onClick={()=>this.returnBook(item)}>RETURN</button></td>\r\n                        )}\r\n                    </tr>\r\n                )}\r\n                <tr>\r\n\r\n                </tr>\r\n            </table>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default CartsBlock;"]},"metadata":{},"sourceType":"module"}