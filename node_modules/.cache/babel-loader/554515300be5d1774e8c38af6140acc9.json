{"ast":null,"code":"var _jsxFileName = \"D:\\\\JS-React-Exam\\\\src\\\\StatisticBlock.js\";\nimport React from 'react';\nimport './BooksBlock.css';\nimport ModalBook from './ModalBook';\n\nclass StatisticBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      carts: []\n    };\n    this.getTopBooks = this.getTopBooks.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      carts: JSON.parse(localStorage.getItem('carts'))\n    });\n  }\n\n  getTopBooks() {\n    var carts = this.state.carts;\n    var cartsBook = [];\n    carts.forEach(function (item) {\n      if (!cartsBook.find(item => item.book.name === item.book.name)) {\n        var temp = item;\n        temp.count = 0;\n        cartsBook.push(carts[i]);\n      }\n    });\n\n    for (var i = 0; i < carts.length; i++) {\n      for (var j = i + 1; j < carts.length; j++) {\n        if (carts[i].book === carts[j].book) {\n          cartsBook.find(item => item.book.name === carts[i].book.name).count += 1;\n        }\n      }\n    }\n\n    cartsBook = cartsBook.sort((item, item2) => item.count > item2.count);\n    alert(cartsBook[cartsBook.length - 1].count);\n    return React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, React.createElement(\"caption\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, \"TOP 5 BOOK\"), cartsBook.map(item => React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, item.book.name))));\n  }\n\n  render() {\n    const books = this.state.books;\n    return React.createElement(\"div\", {\n      className: \"books-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, this.getTopBooks(), \";\");\n  }\n\n}\n\nexport default StatisticBlock;","map":{"version":3,"sources":["D:\\JS-React-Exam\\src\\StatisticBlock.js"],"names":["React","ModalBook","StatisticBlock","Component","constructor","props","state","carts","getTopBooks","bind","componentDidMount","setState","JSON","parse","localStorage","getItem","cartsBook","forEach","item","find","book","name","temp","count","push","i","length","j","sort","item2","alert","map","render","books"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,kBAAP;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAEA,MAAMC,cAAN,SAA6BF,KAAK,CAACG,SAAnC,CAA6C;AAC3CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAW;AACPC,MAAAA,KAAK,EAAC;AADC,KAAX;AAGA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACD;;AACDC,EAAAA,iBAAiB,GAAE;AACjB,SAAKC,QAAL,CAAc;AAACJ,MAAAA,KAAK,EAACK,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX;AAAP,KAAd;AACD;;AAEDP,EAAAA,WAAW,GAAE;AACX,QAAID,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAvB;AACA,QAAIS,SAAS,GAAG,EAAhB;AAEAT,IAAAA,KAAK,CAACU,OAAN,CAAc,UAASC,IAAT,EAAc;AACxB,UAAG,CAACF,SAAS,CAACG,IAAV,CAAeD,IAAI,IAAEA,IAAI,CAACE,IAAL,CAAUC,IAAV,KAAiBH,IAAI,CAACE,IAAL,CAAUC,IAAhD,CAAJ,EAA0D;AACtD,YAAIC,IAAI,GAAGJ,IAAX;AACAI,QAAAA,IAAI,CAACC,KAAL,GAAW,CAAX;AACAP,QAAAA,SAAS,CAACQ,IAAV,CAAejB,KAAK,CAACkB,CAAD,CAApB;AACH;AACJ,KAND;;AAOA,SAAI,IAAIA,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAClB,KAAK,CAACmB,MAApB,EAA2BD,CAAC,EAA5B,EAA+B;AAC3B,WAAI,IAAIE,CAAC,GAACF,CAAC,GAAC,CAAZ,EAAcE,CAAC,GAACpB,KAAK,CAACmB,MAAtB,EAA6BC,CAAC,EAA9B,EAAiC;AAC7B,YAAGpB,KAAK,CAACkB,CAAD,CAAL,CAASL,IAAT,KAAgBb,KAAK,CAACoB,CAAD,CAAL,CAASP,IAA5B,EAAiC;AAC7BJ,UAAAA,SAAS,CAACG,IAAV,CAAeD,IAAI,IAAEA,IAAI,CAACE,IAAL,CAAUC,IAAV,KAAiBd,KAAK,CAACkB,CAAD,CAAL,CAASL,IAAT,CAAcC,IAApD,EAA0DE,KAA1D,IAAiE,CAAjE;AACH;AACJ;AACJ;;AACDP,IAAAA,SAAS,GAAGA,SAAS,CAACY,IAAV,CAAe,CAACV,IAAD,EAAMW,KAAN,KAAcX,IAAI,CAACK,KAAL,GAAWM,KAAK,CAACN,KAA9C,CAAZ;AACAO,IAAAA,KAAK,CAACd,SAAS,CAACA,SAAS,CAACU,MAAV,GAAiB,CAAlB,CAAT,CAA8BH,KAA/B,CAAL;AACA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEKP,SAAS,CAACe,GAAV,CAAcb,IAAI,IACnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKA,IAAI,CAACE,IAAL,CAAUC,IAAf,CADJ,CADC,CAFL,CADJ;AAUD;;AAEDW,EAAAA,MAAM,GAAG;AACP,UAAMC,KAAK,GAAG,KAAK3B,KAAL,CAAW2B,KAAzB;AACA,WACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKzB,WAAL,EADH,MADF;AAKD;;AAnD0C;;AAuD7C,eAAeN,cAAf","sourcesContent":["import React from 'react';\r\nimport './BooksBlock.css';\r\nimport ModalBook from './ModalBook'\r\n\r\nclass StatisticBlock extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n        carts:[]\r\n    }\r\n    this.getTopBooks = this.getTopBooks.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.setState({carts:JSON.parse(localStorage.getItem('carts'))});\r\n  }\r\n\r\n  getTopBooks(){\r\n    var carts = this.state.carts;\r\n    var cartsBook = [];\r\n\r\n    carts.forEach(function(item){\r\n        if(!cartsBook.find(item=>item.book.name===item.book.name)){\r\n            var temp = item;\r\n            temp.count=0;\r\n            cartsBook.push(carts[i]);       \r\n        }\r\n    })\r\n    for(var i=0;i<carts.length;i++){\r\n        for(var j=i+1;j<carts.length;j++){\r\n            if(carts[i].book===carts[j].book){\r\n                cartsBook.find(item=>item.book.name===carts[i].book.name).count+=1;\r\n            }\r\n        }\r\n    }\r\n    cartsBook = cartsBook.sort((item,item2)=>item.count>item2.count);\r\n    alert(cartsBook[cartsBook.length-1].count)\r\n    return(\r\n        <table>\r\n            <caption>TOP 5 BOOK</caption>\r\n            {cartsBook.map(item=>\r\n            <tr>\r\n                <td>{item.book.name}</td>\r\n            </tr>\r\n            )}\r\n        </table>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const books = this.state.books;\r\n    return (     \r\n      <div className=\"books-block\">\r\n        {this.getTopBooks()};\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default StatisticBlock;"]},"metadata":{},"sourceType":"module"}