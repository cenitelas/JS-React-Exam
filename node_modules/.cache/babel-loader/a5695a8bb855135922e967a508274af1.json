{"ast":null,"code":"var _jsxFileName = \"D:\\\\JS-React-Exam\\\\src\\\\StatisticBlock.js\";\nimport React from 'react';\nimport './BooksBlock.css';\nimport ModalBook from './ModalBook';\n\nclass StatisticBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      carts: []\n    };\n    this.getTopBooks = this.getTopBooks.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      carts: JSON.parse(localStorage.getItem('carts'))\n    });\n  }\n\n  getTopBooks() {\n    var carts = this.state.carts;\n    var cartsBook = [];\n\n    for (var i = 0; i < carts.length; i++) {\n      if (!cartsBook.find(item => item.book.name === carts[i].book.name)) {\n        cartsBook.push(carts[i]);\n        cartsBook[cartsBook.length - 1]['count'] = 0;\n      }\n\n      for (var j = i + 1; j < carts.length; j++) {\n        if (carts[i].book === carts[j].book) {\n          cartsBook.find(item => item.book.name === carts[i].book.name).count += 1;\n        }\n      }\n    }\n\n    cartsBook = cartsBook.sort((item, item2) => item.count > item2.count);\n    return React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, React.createElement(\"caption\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, \"TOP 5 BOOK\"), cartsBook.map(item => React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, item.book.name))));\n  }\n\n  render() {\n    const books = this.state.books;\n    return React.createElement(\"div\", {\n      className: \"books-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, this.getTopBooks(), \";\");\n  }\n\n}\n\nexport default StatisticBlock;","map":{"version":3,"sources":["D:\\JS-React-Exam\\src\\StatisticBlock.js"],"names":["React","ModalBook","StatisticBlock","Component","constructor","props","state","carts","getTopBooks","bind","componentDidMount","setState","JSON","parse","localStorage","getItem","cartsBook","i","length","find","item","book","name","push","j","count","sort","item2","map","render","books"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,kBAAP;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAEA,MAAMC,cAAN,SAA6BF,KAAK,CAACG,SAAnC,CAA6C;AAC3CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAW;AACPC,MAAAA,KAAK,EAAC;AADC,KAAX;AAGA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACD;;AACDC,EAAAA,iBAAiB,GAAE;AACjB,SAAKC,QAAL,CAAc;AAACJ,MAAAA,KAAK,EAACK,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX;AAAP,KAAd;AACD;;AAEDP,EAAAA,WAAW,GAAE;AACX,QAAID,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAvB;AACA,QAAIS,SAAS,GAAG,EAAhB;;AAEA,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACV,KAAK,CAACW,MAApB,EAA2BD,CAAC,EAA5B,EAA+B;AAC3B,UAAG,CAACD,SAAS,CAACG,IAAV,CAAeC,IAAI,IAAEA,IAAI,CAACC,IAAL,CAAUC,IAAV,KAAiBf,KAAK,CAACU,CAAD,CAAL,CAASI,IAAT,CAAcC,IAApD,CAAJ,EAA8D;AAC1DN,QAAAA,SAAS,CAACO,IAAV,CAAehB,KAAK,CAACU,CAAD,CAApB;AACAD,QAAAA,SAAS,CAACA,SAAS,CAACE,MAAV,GAAiB,CAAlB,CAAT,CAA8B,OAA9B,IAAyC,CAAzC;AAEH;;AACD,WAAI,IAAIM,CAAC,GAACP,CAAC,GAAC,CAAZ,EAAcO,CAAC,GAACjB,KAAK,CAACW,MAAtB,EAA6BM,CAAC,EAA9B,EAAiC;AAC7B,YAAGjB,KAAK,CAACU,CAAD,CAAL,CAASI,IAAT,KAAgBd,KAAK,CAACiB,CAAD,CAAL,CAASH,IAA5B,EAAiC;AAC7BL,UAAAA,SAAS,CAACG,IAAV,CAAeC,IAAI,IAAEA,IAAI,CAACC,IAAL,CAAUC,IAAV,KAAiBf,KAAK,CAACU,CAAD,CAAL,CAASI,IAAT,CAAcC,IAApD,EAA0DG,KAA1D,IAAiE,CAAjE;AACH;AACJ;AACJ;;AACDT,IAAAA,SAAS,GAAGA,SAAS,CAACU,IAAV,CAAe,CAACN,IAAD,EAAMO,KAAN,KAAcP,IAAI,CAACK,KAAL,GAAWE,KAAK,CAACF,KAA9C,CAAZ;AAEA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEKT,SAAS,CAACY,GAAV,CAAcR,IAAI,IACnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKA,IAAI,CAACC,IAAL,CAAUC,IAAf,CADJ,CADC,CAFL,CADJ;AAUD;;AAEDO,EAAAA,MAAM,GAAG;AACP,UAAMC,KAAK,GAAG,KAAKxB,KAAL,CAAWwB,KAAzB;AACA,WACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKtB,WAAL,EADH,MADF;AAKD;;AAjD0C;;AAqD7C,eAAeN,cAAf","sourcesContent":["import React from 'react';\r\nimport './BooksBlock.css';\r\nimport ModalBook from './ModalBook'\r\n\r\nclass StatisticBlock extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n        carts:[]\r\n    }\r\n    this.getTopBooks = this.getTopBooks.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.setState({carts:JSON.parse(localStorage.getItem('carts'))});\r\n  }\r\n\r\n  getTopBooks(){\r\n    var carts = this.state.carts;\r\n    var cartsBook = [];\r\n\r\n    for(var i=0;i<carts.length;i++){\r\n        if(!cartsBook.find(item=>item.book.name===carts[i].book.name)){\r\n            cartsBook.push(carts[i]);\r\n            cartsBook[cartsBook.length-1]['count'] = 0;\r\n          \r\n        }\r\n        for(var j=i+1;j<carts.length;j++){\r\n            if(carts[i].book===carts[j].book){\r\n                cartsBook.find(item=>item.book.name===carts[i].book.name).count+=1;\r\n            }\r\n        }\r\n    }\r\n    cartsBook = cartsBook.sort((item,item2)=>item.count>item2.count);\r\n\r\n    return(\r\n        <table>\r\n            <caption>TOP 5 BOOK</caption>\r\n            {cartsBook.map(item=>\r\n            <tr>\r\n                <td>{item.book.name}</td>\r\n            </tr>\r\n            )}\r\n        </table>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const books = this.state.books;\r\n    return (     \r\n      <div className=\"books-block\">\r\n        {this.getTopBooks()};\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default StatisticBlock;"]},"metadata":{},"sourceType":"module"}