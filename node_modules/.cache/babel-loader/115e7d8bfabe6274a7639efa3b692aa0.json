{"ast":null,"code":"var _jsxFileName = \"D:\\\\JS-React-Exam\\\\src\\\\StatisticBlock.js\";\nimport React from 'react';\nimport './StatisticBlock.css';\n\nclass StatisticBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      carts: []\n    };\n    this.getTopBooks = this.getTopBooks.bind(this);\n    this.getTopVisitors = this.getTopVisitors.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      carts: JSON.parse(localStorage.getItem('carts'))\n    });\n  }\n\n  getTopBooks() {\n    var carts = this.state.carts;\n    var cartsBook = [];\n    carts.forEach(function (item) {\n      if (!cartsBook.find(i => i.book.name === item.book.name)) {\n        var temp = item;\n        temp.count = 0;\n        cartsBook.push(temp);\n      }\n    });\n    carts.forEach(function (item) {\n      cartsBook.find(i => i.book.name === item.book.name).count += 1;\n    });\n    var sortCart = cartsBook.sort(function (a, b) {\n      if (a.count < b.count) {\n        return 1;\n      }\n\n      if (a.count > b.count) {\n        return -1;\n      }\n\n      return 0;\n    });\n    return React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"caption\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"TOP 5 BOOKS\"), sortCart.copyWithin(0, 5).map(item => React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, item.book.name))));\n  }\n\n  getTopVisitors() {\n    var carts = this.state.carts;\n    var cartsVisitor = [];\n    carts.forEach(function (item) {\n      if (!cartsVisitor.find(i => i.visitor.name === item.visitor.name)) {\n        var temp = item;\n        temp.count = 0;\n        cartsVisitor.push(temp);\n      }\n    });\n    carts.forEach(function (item) {\n      cartsVisitor.find(i => i.visitor.name === item.visitor.name).count += 1;\n    });\n    var sortCart = cartsVisitor.sort(function (a, b) {\n      if (a.count < b.count) {\n        return 1;\n      }\n\n      if (a.count > b.count) {\n        return -1;\n      }\n\n      return 0;\n    });\n    return React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"caption\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"TOP 5 VISITORS\"), sortCart.map(item => React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, item.visitor.name))));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"statistic-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, this.getTopBooks(), this.getTopVisitors());\n  }\n\n}\n\nexport default StatisticBlock;","map":{"version":3,"sources":["D:\\JS-React-Exam\\src\\StatisticBlock.js"],"names":["React","StatisticBlock","Component","constructor","props","state","carts","getTopBooks","bind","getTopVisitors","componentDidMount","setState","JSON","parse","localStorage","getItem","cartsBook","forEach","item","find","i","book","name","temp","count","push","sortCart","sort","a","b","copyWithin","map","cartsVisitor","visitor","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,sBAAP;;AAEA,MAAMC,cAAN,SAA6BD,KAAK,CAACE,SAAnC,CAA6C;AAC3CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAW;AACPC,MAAAA,KAAK,EAAC;AADC,KAAX;AAGA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AACD;;AACDE,EAAAA,iBAAiB,GAAE;AACjB,SAAKC,QAAL,CAAc;AAACL,MAAAA,KAAK,EAACM,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX;AAAP,KAAd;AACD;;AAEDR,EAAAA,WAAW,GAAE;AACX,QAAID,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAvB;AACA,QAAIU,SAAS,GAAG,EAAhB;AAEAV,IAAAA,KAAK,CAACW,OAAN,CAAc,UAASC,IAAT,EAAc;AACxB,UAAG,CAACF,SAAS,CAACG,IAAV,CAAeC,CAAC,IAAEA,CAAC,CAACC,IAAF,CAAOC,IAAP,KAAcJ,IAAI,CAACG,IAAL,CAAUC,IAA1C,CAAJ,EAAoD;AAChD,YAAIC,IAAI,GAAGL,IAAX;AACAK,QAAAA,IAAI,CAACC,KAAL,GAAW,CAAX;AACAR,QAAAA,SAAS,CAACS,IAAV,CAAeF,IAAf;AACH;AACJ,KAND;AAQAjB,IAAAA,KAAK,CAACW,OAAN,CAAc,UAASC,IAAT,EAAc;AACpBF,MAAAA,SAAS,CAACG,IAAV,CAAeC,CAAC,IAAEA,CAAC,CAACC,IAAF,CAAOC,IAAP,KAAcJ,IAAI,CAACG,IAAL,CAAUC,IAA1C,EAAgDE,KAAhD,IAAuD,CAAvD;AACP,KAFD;AAIA,QAAIE,QAAQ,GAAGV,SAAS,CAACW,IAAV,CAAe,UAASC,CAAT,EAAWC,CAAX,EAAa;AACvC,UAAID,CAAC,CAACJ,KAAF,GAAUK,CAAC,CAACL,KAAhB,EAAuB;AACnB,eAAO,CAAP;AACD;;AACD,UAAII,CAAC,CAACJ,KAAF,GAAUK,CAAC,CAACL,KAAhB,EAAuB;AACrB,eAAO,CAAC,CAAR;AACD;;AAED,aAAO,CAAP;AACL,KATc,CAAf;AAWA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,EAEKE,QAAQ,CAACI,UAAT,CAAoB,CAApB,EAAsB,CAAtB,EAA0BC,GAA1B,CAA8Bb,IAAI,IACnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKA,IAAI,CAACG,IAAL,CAAUC,IAAf,CADJ,CADC,CAFL,CADJ;AAUD;;AAEDb,EAAAA,cAAc,GAAE;AACd,QAAIH,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAvB;AACA,QAAI0B,YAAY,GAAG,EAAnB;AAEA1B,IAAAA,KAAK,CAACW,OAAN,CAAc,UAASC,IAAT,EAAc;AACxB,UAAG,CAACc,YAAY,CAACb,IAAb,CAAkBC,CAAC,IAAEA,CAAC,CAACa,OAAF,CAAUX,IAAV,KAAiBJ,IAAI,CAACe,OAAL,CAAaX,IAAnD,CAAJ,EAA6D;AACzD,YAAIC,IAAI,GAAGL,IAAX;AACAK,QAAAA,IAAI,CAACC,KAAL,GAAW,CAAX;AACAQ,QAAAA,YAAY,CAACP,IAAb,CAAkBF,IAAlB;AACH;AACJ,KAND;AAQAjB,IAAAA,KAAK,CAACW,OAAN,CAAc,UAASC,IAAT,EAAc;AACxBc,MAAAA,YAAY,CAACb,IAAb,CAAkBC,CAAC,IAAEA,CAAC,CAACa,OAAF,CAAUX,IAAV,KAAiBJ,IAAI,CAACe,OAAL,CAAaX,IAAnD,EAAyDE,KAAzD,IAAgE,CAAhE;AACH,KAFD;AAIA,QAAIE,QAAQ,GAAGM,YAAY,CAACL,IAAb,CAAkB,UAASC,CAAT,EAAWC,CAAX,EAAa;AAC1C,UAAID,CAAC,CAACJ,KAAF,GAAUK,CAAC,CAACL,KAAhB,EAAuB;AACnB,eAAO,CAAP;AACD;;AACD,UAAII,CAAC,CAACJ,KAAF,GAAUK,CAAC,CAACL,KAAhB,EAAuB;AACrB,eAAO,CAAC,CAAR;AACD;;AAED,aAAO,CAAP;AACL,KATc,CAAf;AAWA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,EAEKE,QAAQ,CAACK,GAAT,CAAab,IAAI,IAClB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKA,IAAI,CAACe,OAAL,CAAaX,IAAlB,CADJ,CADC,CAFL,CADJ;AAUD;;AAEDY,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK3B,WAAL,EADH,EAEG,KAAKE,cAAL,EAFH,CADF;AAMD;;AAlG0C;;AAsG7C,eAAeR,cAAf","sourcesContent":["import React from 'react';\r\nimport './StatisticBlock.css';\r\n\r\nclass StatisticBlock extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n        carts:[]\r\n    }\r\n    this.getTopBooks = this.getTopBooks.bind(this);\r\n    this.getTopVisitors = this.getTopVisitors.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.setState({carts:JSON.parse(localStorage.getItem('carts'))});\r\n  }\r\n\r\n  getTopBooks(){\r\n    var carts = this.state.carts;\r\n    var cartsBook = [];\r\n\r\n    carts.forEach(function(item){\r\n        if(!cartsBook.find(i=>i.book.name===item.book.name)){\r\n            var temp = item;\r\n            temp.count=0;\r\n            cartsBook.push(temp);       \r\n        }\r\n    })\r\n\r\n    carts.forEach(function(item){\r\n            cartsBook.find(i=>i.book.name===item.book.name).count+=1;\r\n    })\r\n\r\n    var sortCart = cartsBook.sort(function(a,b){\r\n        if (a.count < b.count) {\r\n            return 1;\r\n          }\r\n          if (a.count > b.count) {\r\n            return -1;\r\n          }\r\n\r\n          return 0;\r\n    })\r\n\r\n    return(\r\n        <table>\r\n            <caption>TOP 5 BOOKS</caption>\r\n            {sortCart.copyWithin(0,5) .map(item=>\r\n            <tr>\r\n                <td>{item.book.name}</td>\r\n            </tr>\r\n            )}\r\n        </table>\r\n    )\r\n  }\r\n\r\n  getTopVisitors(){\r\n    var carts = this.state.carts;\r\n    var cartsVisitor = [];\r\n\r\n    carts.forEach(function(item){\r\n        if(!cartsVisitor.find(i=>i.visitor.name===item.visitor.name)){\r\n            var temp = item;\r\n            temp.count=0;\r\n            cartsVisitor.push(temp);       \r\n        }\r\n    })\r\n\r\n    carts.forEach(function(item){\r\n        cartsVisitor.find(i=>i.visitor.name===item.visitor.name).count+=1;\r\n    })\r\n\r\n    var sortCart = cartsVisitor.sort(function(a,b){\r\n        if (a.count < b.count) {\r\n            return 1;\r\n          }\r\n          if (a.count > b.count) {\r\n            return -1;\r\n          }\r\n\r\n          return 0;\r\n    })\r\n\r\n    return(\r\n        <table>\r\n            <caption>TOP 5 VISITORS</caption>\r\n            {sortCart.map(item=>\r\n            <tr>\r\n                <td>{item.visitor.name}</td>\r\n            </tr>\r\n            )}\r\n        </table>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (     \r\n      <div className=\"statistic-block\">\r\n        {this.getTopBooks()}\r\n        {this.getTopVisitors()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default StatisticBlock;"]},"metadata":{},"sourceType":"module"}